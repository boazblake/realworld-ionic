{"version":3,"sources":["app/Http.js","app/Utils.js","app/components/articles.js","app/components/banner.js","app/components/card.js","app/components/comments.js","app/components/feed-nav.js","app/components/follow-favorite.js","app/components/index.js","app/components/loader.js","app/components/paginator.js","app/components/sidebar.js","app/index.js","app/initialize.js","app/layout/footer.js","app/layout/header.js","app/layout/index.js","app/layout/info.js","app/model.js","app/pages/article.js","app/pages/editor.js","app/pages/home.js","app/pages/login.js","app/pages/profile.js","app/pages/register.js","app/pages/user.js","app/routes.js"],"names":["api","onProgress","mdl","e","lengthComputable","state","loadingProgress","max","total","value","loaded","m","redraw","onLoad","onLoadStart","isLoading","onLoadEnd","xhrProgress","config","xhr","onprogress","onload","onloadstart","onloadend","parseHttpError","rej","response","errors","parseHttpSuccess","res","data","getUserToken","sessionStorage","getItem","authorization","call","_headers","method","url","body","includes","isLoggedIn","slug","Task","rejected","route","set","request","headers","withCredentials","then","Http","getTask","deleteTask","postTask","putTask","log","v","console","secureImg","match","replace","sanitizeImg","errorViewModel","err","Object","keys","map","k","key","toUpperCase","values","favoriteArticleUrl","favoriteArticleTask","http","unFavoriteArticleTask","ArticlePreview","attrs","article","toggleArticleLike","favorited","onError","onSuccess","favoritesCount","toggle","fork","view","Link","class","href","title","description","side","tagList","tag","author","username","options","slot","src","image","createdAt","onclick","name","Articles","articles","length","Banner","children","Card","header","content","footer","translucent","getCommentsTask","deleteCommentTask","id","trimBody","trim","submitTask","comment","CommentForm","reload","disabled","submit","oninit","rows","placeholder","onchange","target","user","Comment","deleteComment","Comments","comments","loadComments","chain","x","c","FeedNav","fetchData","fill","expand","color","tags","current","selected","size","deleteArticleUrl","followAuthorUrl","deleteArticleTask","followAuthorTask","unFollowAuthorTask","FollowFavorite","toggleAuthorFollow","following","profile","deleteArticle","s","selector","Loader","Paginator","fetchDataFor","Math","ceil","limit","offset","range","Array","slice","page","idx","SideBar","selectTag","concat","isSelected","filter","root","document","winW","window","innerWidth","module","hot","accept","process","env","NODE_ENV","navigator","addEventListener","serviceWorker","register","registration","catch","registrationError","getProfile","w","checkWidth","lastProfile","model","settings","requestAnimationFrame","JSON","parse","require","Footer","trust","Header","Layout","info","getArticleTask","Article","status","error","loadData","reloadArticle","loadArticleTask","formatTags","uniq","submitArticleTask","Editor","initEditor","submitData","type","getTagsTask","getArticlesTask","loadDataTask","of","ap","Home","feedStatus","pageStatus","loadInitData","articlesCount","loadArticles","wrap","loginTask","Login","email","password","onSubmit","preventDefault","setItem","token","stringify","onblur","isSubmitted","validate","getProfileTask","getAuthorArticlesTask","getAuthorFavoriteArticlesTask","showFaveArticles","loadInitDataTask","authorArticles","Profile","authorFavoriteArticles","result","selectFeed","toShowFaveArticles","toggleTask","bio","registerTask","Register","logout","clear","User","routes","onmatch","_","b","render"],"mappings":"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","file":"docs/app.js","sourcesContent":["const api = \"https://conduit.productionready.io/api/\"\n\nconst onProgress = (mdl) => (e) => {\n  if (e.lengthComputable) {\n    mdl.state.loadingProgress.max = e.total\n    mdl.state.loadingProgress.value = e.loaded\n    m.redraw()\n  }\n}\n\nfunction onLoad() {\n  return false\n}\n\nconst onLoadStart = (mdl) => (e) => {\n  mdl.state.isLoading = true\n  return false\n}\n\nconst onLoadEnd = (mdl) => (e) => {\n  mdl.state.isLoading = false\n  mdl.state.loadingProgress.max = 0\n  mdl.state.loadingProgress.value = 0\n  return false\n}\n\nconst xhrProgress = (mdl) => ({\n  config: (xhr) => {\n    xhr.onprogress = onProgress(mdl)\n    xhr.onload = onLoad\n    xhr.onloadstart = onLoadStart(mdl)\n    xhr.onloadend = onLoadEnd(mdl)\n  },\n})\n\nexport const parseHttpError = (mdl) => (rej) => (e) => {\n  mdl.state.isLoading = false\n  return rej(e.response.errors)\n}\n\nexport const parseHttpSuccess = (mdl) => (res) => (data) => {\n  mdl.state.isLoading = false\n  return res(data)\n}\n\nconst getUserToken = () =>\n  sessionStorage.getItem(\"token\")\n    ? { authorization: sessionStorage.getItem(\"token\") }\n    : \"\"\n\nconst call = (_headers) => (method) => (mdl) => (url) => (body) => {\n  if ([\"POST\", \"PUT\", \"DELETE\"].includes(method) && !mdl.state.isLoggedIn()) {\n    if (![\"/login\", \"/register\"].includes(mdl.slug)) {\n      return Task.rejected(m.route.set(\"/register\"))\n    }\n  }\n\n  mdl.state.isLoading = true\n  return new Task((rej, res) =>\n    m\n      .request({\n        method,\n        url: api + url,\n        headers: {\n          \"content-type\": \"application/json\",\n          ..._headers,\n        },\n        body,\n        withCredentials: false,\n        ...xhrProgress(mdl),\n      })\n      .then(parseHttpSuccess(mdl)(res), parseHttpError(mdl)(rej))\n  )\n}\n\nconst Http = {\n  getTask: (mdl) => (url) => call(getUserToken())(\"GET\")(mdl)(url)(null),\n  deleteTask: (mdl) => (url) => call(getUserToken())(\"DELETE\")(mdl)(url)(null),\n  postTask: (mdl) => (url) => (data) =>\n    call(getUserToken())(\"POST\")(mdl)(url)(data),\n  putTask: (mdl) => (url) => (data) =>\n    call(getUserToken())(\"PUT\")(mdl)(url)(data),\n}\n\nexport default Http\n","export const log = (m) => (v) => {\n  console.log(m, v)\n  return v\n}\n\nconst secureImg = (url) =>\n  url.match(/(https)./) ? url : url.replace(\"http\", \"https\")\n\nexport const sanitizeImg = (url) =>\n  url && url.match(/\\.(jpeg|jpg|gif|png|svg)$/)\n    ? secureImg(url)\n    : \"https://static.productionready.io/images/smiley-cyrus.jpg\"\n\nexport const errorViewModel = (err) =>\n  Object.keys(err).map((k) => ({ key: k.toUpperCase(), values: err[k] }))\n","import Http from \"Http\"\nimport { log, sanitizeImg } from \"Utils\"\n\nconst favoriteArticleUrl = (slug) => `articles/${slug}/favorite`\nconst favoriteArticleTask = (http) => (mdl) => (slug) =>\n  http.postTask(mdl)(favoriteArticleUrl(slug))()\n\nconst unFavoriteArticleTask = (http) => (mdl) => (slug) =>\n  http.deleteTask(mdl)(favoriteArticleUrl(slug))\n\nconst ArticlePreview = ({ attrs: { mdl, article } }) => {\n  let data = article\n  const toggleArticleLike = (favorited, slug) => {\n    const onError = log(\"toggleArticleLike err-art\")\n    const onSuccess = ({ article: { favorited, favoritesCount } }) => {\n      data.favorited = favorited\n      data.favoritesCount = favoritesCount\n    }\n\n    let toggle = favorited ? unFavoriteArticleTask : favoriteArticleTask\n    toggle(Http)(mdl)(slug).fork(onError, onSuccess)\n  }\n\n  return {\n    view: () => {\n      return m(\n        \"ion-item\",\n        m(\"ion-grid\", [\n          m(\n            \"ion-row\",\n            m(\n              \"ion-col\",\n              m(\n                m.route.Link,\n                { class: \"preview-link\", href: `/article/${data.slug}` },\n                m(\"ion-text\", m(\"h1\", data.title)),\n                m(\"ion-text\", m(\"p\", data.description))\n              )\n            )\n          ),\n          m(\n            \"ion-row\",\n            m(\n              \"ion-col\",\n              m(\n                \"ion-list\",\n                { side: \"end\" },\n                data.tagList.map((tag) => m(\"ion-chip\", tag))\n              )\n            )\n          ),\n          m(\"ion-row\", [\n            m(\n              m.route.Link,\n              {\n                href: `/profile/${data.author.username}`,\n                options: { replace: true },\n              },\n              m(\n                \"ion-avatar\",\n                { slot: \"start\" },\n                m(\"img\", { src: sanitizeImg(data.author.image) })\n              )\n            ),\n            m(\n              \"ion-label\",\n              m(\"ion-text\", m(\"h2\", data.author.username)),\n              m(\"p\", data.createdAt)\n            ),\n            m(\n              \"ion-chip\",\n              {\n                onclick: (e) => toggleArticleLike(data.favorited, data.slug),\n              },\n              [\n                m(\"ion-icon\", {\n                  name: data.favorited\n                    ? \"heart-dislike-outline\"\n                    : \"heart-outline\",\n                }),\n                m(\"ion-text\", data.favoritesCount),\n              ]\n            ),\n          ]),\n        ])\n      )\n    },\n  }\n}\n\nexport const Articles = () => {\n  return {\n    view: ({ attrs: { mdl, data } }) => {\n      return data.articles.length\n        ? m(\n            \"ion-list\",\n            data.articles.map((article) =>\n              m(ArticlePreview, { mdl, data, article })\n            )\n          )\n        : m(\"p\", \"No articles are here... yet.\")\n    },\n  }\n}\n","export const Banner = () => {\n  return {\n    view: ({ children }) => m(\".banner\", m(\".container\", children)),\n  }\n}\n","export const Card = {\n  view: ({ attrs: { header, content, footer } }) =>\n    m(\n      \"ion-card\",\n      m(\"ion-card-header\", { translucent: true }, header),\n      m(\"ion-card-content\", content),\n      m(\"ion-card-footer\", footer)\n    ),\n}\n","import Http from \"Http\"\nimport { Card } from \"./card\"\nimport { log, sanitizeImg, errorViewModel } from \"Utils\"\nimport { lensProp, over, trim } from \"ramda\"\n\nconst getCommentsTask = (http) => (mdl) => (slug) =>\n  http.getTask(mdl)(`articles/${slug}/comments`)\n\nconst deleteCommentTask = (http) => (mdl) => (slug) => (id) =>\n  http.deleteTask(mdl)(`articles/${slug}/comments/${id}`)\n\nconst trimBody = over(lensProp(\"body\"), trim)\n\nconst submitTask = (http) => (mdl) => (comment) =>\n  http.postTask(mdl)(`articles/${mdl.slug}/comments`)({ comment })\n\nconst CommentForm = ({ attrs: { mdl, reload } }) => {\n  const comment = { body: \"\" }\n  const state = { errors: [], disabled: false }\n\n  const onError = (errors) => {\n    state.errors = errorViewModel(errors)\n    console.log(\"Error with form \", state)\n    state.disabled = false\n  }\n\n  const onSuccess = () => {\n    comment.body = \"\"\n    state.errors = []\n    state.disabled = false\n    reload()\n  }\n\n  const submit = (comment) =>\n    submitTask(Http)(mdl)(trimBody(comment)).fork(onError, onSuccess)\n\n  return {\n    oninit: () => (comment.body = \"\"),\n    view: ({ attrs: { mdl } }) => [\n      m(Card, {\n        content: m(\"ion-textarea\", {\n          rows: 3,\n          placeholder: \"Write a comment ...\",\n          onchange: (e) => (comment.body = e.target.value),\n          disabled: state.disabled,\n          value: comment.body,\n        }),\n        footer: [\n          m(\n            \"ion-row\",\n            m(\n              \"ion-col\",\n              m(\"ion-avatar\", m(\"img\", { src: sanitizeImg(mdl.user.image) }))\n            ),\n\n            m(\n              \"ion-col\",\n              m(\n                \"ion-button\",\n                {\n                  onclick: (e) => {\n                    state.disabled = true\n                    submit(comment)\n                  },\n                },\n                \" Post Comment \"\n              )\n            )\n          ),\n        ],\n      }),\n\n      state.errors.map((e) =>\n        e.values.map((err) => m(\"p.error-messages\", `${e.key} ${err}`))\n      ),\n    ],\n  }\n}\n\nconst Comment = () => {\n  return {\n    view: ({\n      attrs: {\n        mdl,\n        comment: {\n          author: { image, username },\n          body,\n          createdAt,\n          id,\n        },\n        deleteComment,\n      },\n    }) =>\n      m(\n        \"ion-item\",\n\n        m(\n          \"ion-grid\",\n          (\"ion-row\", m(\"ion-text\", body)),\n          m(\n            \"ion-row\",\n            m(\n              m.route.Link,\n              {\n                href: `/profile/${username}`,\n                class: \"comment-author m-5\",\n              },\n              m(\n                \"ion-avatar\",\n                m(\"img\", {\n                  src: sanitizeImg(image),\n                })\n              ),\n              m(\"ion-text\", username)\n            ),\n            m(\"ion-text\", createdAt),\n\n            username == mdl.user.username &&\n              m(\"ion-icon\", {\n                name: \"trash-outline\",\n                onclick: (e) => deleteComment(id),\n              })\n          )\n        )\n      ),\n  }\n}\n\nexport const Comments = ({ attrs: { mdl } }) => {\n  const data = { comments: [] }\n\n  const loadComments = (mdl) => {\n    const onSuccess = ({ comments }) => (data.comments = comments)\n\n    const onError = log(\"error with comments\")\n\n    getCommentsTask(Http)(mdl)(mdl.slug).fork(onError, onSuccess)\n  }\n\n  const deleteComment = (id) => {\n    const onSuccess = ({ comments }) => (data.comments = comments)\n\n    const onError = log(\"error with comments\")\n\n    deleteCommentTask(Http)(mdl)(mdl.slug)(id)\n      .chain((x) => getCommentsTask(Http)(mdl)(mdl.slug))\n      .fork(onError, onSuccess)\n  }\n\n  return {\n    oninit: ({ attrs: { mdl } }) => loadComments(mdl),\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \"item-list\",\n        m(CommentForm, { mdl, reload: () => loadComments(mdl) }),\n        data.comments.map((c) =>\n          m(Comment, {\n            mdl,\n            comment: c,\n            deleteComment: (id) => deleteComment(id),\n          })\n        )\n      ),\n  }\n}\n","export const FeedNav = ({ attrs: { fetchData } }) => {\n  return {\n    view: ({ attrs: { mdl, data } }) => {\n      return [\n        m(\n          \"ion-toolbar\",\n          m(\n            \"ion-row\",\n            mdl.state.isLoggedIn() &&\n              m(\n                \"ion-col\",\n                m(\n                  \"ion-button\",\n                  {\n                    fill: \"solid\",\n                    expand: \"full\",\n                    id: \"feed\",\n                    color:\n                      data.tags.current == \"feed\" ? \"primary\" : \"secondary\",\n                    onclick: (e) => {\n                      console.log(\"data.tags.current\", e.target.id, e)\n                      data.tags.current = e.target.id\n                      fetchData(mdl)\n                    },\n                  },\n                  \"Your Feed\"\n                )\n              ),\n\n            m(\n              \"ion-col\",\n              m(\n                \"ion-button\",\n                {\n                  fill: \"solid\",\n                  expand: \"full\",\n                  id: \"\",\n                  color: data.tags.current == \"\" ? \"primary\" : \"secondary\",\n                  onclick: (e) => {\n                    data.tags.current = e.target.id\n                    fetchData(mdl)\n                  },\n                },\n                \"Global Feed\"\n              )\n            )\n          ),\n\n          m(\n            \"ion-row\",\n\n            m(\n              \"ion-col\",\n              data.tags.selected.map((tag) =>\n                m(\n                  \"ion-button\",\n                  {\n                    fill: \"solid\",\n                    size: \"small\",\n                    color: data.tags.current == tag ? \"primary\" : \"secondary\",\n                    id: tag,\n                    onclick: (e) => {\n                      data.tags.current = tag\n                      fetchData(mdl)\n                    },\n                  },\n                  m(\"ion-text\", `# ${tag}`)\n                  //Move this to user profile\n                  // import { without } from \"ramda\"\n                  // m(\"ion-icon\", {\n                  //   name: \"close-circle-outline\",\n                  //   onclick: (e) =>\n                  //     (data.tags.selected = without(tag, data.tags.selected)),\n                  // })\n                )\n              )\n            )\n          )\n        ),\n      ]\n    },\n  }\n}\n","import Http from \"Http\"\nimport { log, sanitizeImg } from \"Utils\"\n\nconst deleteArticleUrl = (slug) => `articles/${slug}`\nconst favoriteArticleUrl = (slug) => `articles/${slug}/favorite`\nconst followAuthorUrl = (author) => `profiles/${author}/follow`\n\nconst deleteArticleTask = (http) => (mdl) =>\n  http.deleteTask(mdl)(deleteArticleUrl(mdl.slug))\n\nconst favoriteArticleTask = (http) => (mdl) =>\n  http.postTask(mdl)(favoriteArticleUrl(mdl.slug))()\n\nconst unFavoriteArticleTask = (http) => (mdl) =>\n  http.deleteTask(mdl)(favoriteArticleUrl(mdl.slug))\n\nconst followAuthorTask = (http) => (mdl) => (author) =>\n  http.postTask(mdl)(followAuthorUrl(author))()\n\nconst unFollowAuthorTask = (http) => (mdl) => (author) =>\n  http.deleteTask(mdl)(followAuthorUrl(author))\n\nexport const FollowFavorite = ({ attrs: { mdl, data } }) => {\n  const toggleArticleLike = ({ favorited }) => {\n    const onError = log(\"toggleArticleLike err-art\")\n    const onSuccess = ({ article: { favorited, favoritesCount } }) => {\n      data.favorited = favorited\n      data.favoritesCount = favoritesCount\n    }\n\n    let toggle = favorited ? unFavoriteArticleTask : favoriteArticleTask\n    toggle(Http)(mdl).fork(onError, onSuccess)\n  }\n\n  const toggleAuthorFollow = ({ author: { username, following } }) => {\n    const onError = log(\"toggleAuthorFollow, err-auth\")\n    const onSuccess = ({ profile: { following } }) =>\n      (data.author.following = following)\n\n    let toggle = following ? unFollowAuthorTask : followAuthorTask\n    toggle(Http)(mdl)(username).fork(onError, onSuccess)\n  }\n\n  const deleteArticle = (slug) => {\n    const onError = log(\"deleteArticle, err-auth\")\n    const onSuccess = (s) => {\n      console.log(s)\n      m.route.set(\"/home\")\n    }\n    deleteArticleTask(Http)(mdl).fork(onError, onSuccess)\n  }\n\n  return {\n    view: ({\n      attrs: {\n        mdl,\n        data: {\n          author: { username, image, following },\n          favoritesCount,\n          favorited,\n          createdAt,\n          slug,\n        },\n      },\n    }) => {\n      return m(\n        \"ion-grid\",\n        m(\"ion-row\", [\n          m(\n            m.route.Link,\n            { href: `profile/${username}` },\n            m(\n              \"ion-avatar\",\n              m(\"img\", { src: sanitizeImg(image) }),\n              m(\"ion-text\", username)\n            )\n          ),\n\n          mdl.user.username == username\n            ? [\n                m(\n                  m.route.Link,\n                  {\n                    class: \"btn btn-sm btn-outline-secondary\",\n                    href: `/editor/${slug}`,\n                    selector: \"button\",\n                  },\n                  [m(\"ion-icon\", { name: \"edit\" }), \"Edit Article\"]\n                ),\n                m(\"ion-button\", { onclick: (e) => deleteArticle(slug) }, [\n                  m(\"ion-icon\", { name: \"trash-outline\" }),\n                  \"Delete Article \",\n                ]),\n              ]\n            : [\n                m(\"ion-chip\", { onclick: (e) => toggleAuthorFollow(data) }, [\n                  m(\"ion-icon\", {\n                    name: following\n                      ? \"people-circle-outline\"\n                      : \"people-outline\",\n                  }),\n                  m(\"ion-text\", `${username}`),\n                ]),\n                m(\"ion-chip\", { onclick: (e) => toggleArticleLike(data) }, [\n                  m(\"ion-icon\", {\n                    name: favorited ? \"heart-dislike-outline\" : \"heart-outline\",\n                  }),\n                  m(\"ion-text\", favoritesCount),\n                ]),\n              ],\n        ])\n      )\n    },\n  }\n}\n","export * from \"./banner\"\nexport * from \"./loader\"\nexport * from \"./paginator\"\nexport * from \"./articles\"\nexport * from \"./follow-favorite\"\nexport * from \"./comments\"\nexport * from \"./feed-nav\"\nexport * from \"./sidebar\"\nexport * from \"./card\"\n","export const Loader = () => {\n  return {\n    view: ({ children }) =>\n      m(\".container\", m(\".banner\", m(\".container\", children))),\n  }\n}\n","export const Paginator = () => {\n  return {\n    view: ({ attrs: { state, fetchDataFor } }) => {\n      let total = Math.ceil(state.total / state.limit) + 1\n      let current = state.offset / state.limit + 1\n      let range = [...Array(total).keys()].slice(1)\n      return (\n        state.total > state.limit &&\n        range.map((page, idx) => {\n          return m(\n            \"ion-chip\",\n            {\n              color: page == current && \"primary\",\n              onclick: (e) => fetchDataFor(idx * state.limit),\n            },\n            page\n          )\n        })\n      )\n    },\n  }\n}\n","import { uniq } from \"ramda\"\n\nexport const SideBar = () => {\n  const selectTag = (data, tag) =>\n    (data.tags.selected = uniq(data.tags.selected.concat([tag])))\n\n  return {\n    view: ({ attrs: { data } }) => {\n      const isSelected = (tag) =>\n        data.tags.selected.includes(tag) ? \"primary\" : \"secondary\"\n\n      return [\n        m(\"ion-text\", \"Popular Tags\"),\n\n        data.tags.tagList\n          .filter((tag) => !data.tags.selected.includes(tag))\n          .map((tag) =>\n            m(\n              \"ion-chip\",\n              {\n                color: isSelected(tag),\n                onclick: (e) => selectTag(data, tag),\n              },\n              tag\n            )\n          ),\n      ]\n    },\n  }\n}\n","import routes from \"./routes.js\"\nimport model from \"./model.js\"\n\nconst root = document.body\nlet winW = window.innerWidth\n\nif (module.hot) {\n  module.hot.accept()\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  console.log(\"Looks like we are in development mode!\")\n} else {\n  if (\"serviceWorker\" in navigator) {\n    window.addEventListener(\"load\", () => {\n      navigator.serviceWorker\n        .register(\"./service-worker.js\")\n        .then((registration) => {\n          console.log(\"⚙️ SW registered: \", registration)\n        })\n        .catch((registrationError) => {\n          console.log(\"🧟 SW registration failed: \", registrationError)\n        })\n    })\n  }\n}\n\n// set display profiles\nconst getProfile = (w) => {\n  if (w < 668) return \"phone\"\n  if (w < 920) return \"tablet\"\n  return \"desktop\"\n}\n\nconst checkWidth = (winW) => {\n  const w = window.innerWidth\n  if (winW !== w) {\n    winW = w\n    var lastProfile = model.settings.profile\n    model.settings.profile = getProfile(w)\n    if (lastProfile != model.settings.profile) m.redraw()\n  }\n  return requestAnimationFrame(checkWidth)\n}\n\nmodel.settings.profile = getProfile(winW)\n\ncheckWidth(winW)\n\nif (sessionStorage.getItem(\"user\")) {\n  model.user = JSON.parse(sessionStorage.getItem(\"user\"))\n}\n\nm.route(root, \"/home\", routes(model))\n","document.addEventListener(\"DOMContentLoaded\", () => {\n  require(\"./index.js\")\n})\n","const Footer = () => {\n  return {\n    view: () =>\n      m(\n        \"ion-footer\",\n        m(\"div\", { class: \"container\" }, [\n          m(\n            \"a\",\n            {\n              class: \"logo-font\",\n              href: \"https://github.com/gothinkster/realworld\",\n            },\n            \"conduit\"\n          ),\n          m(\"span\", { class: \"attribution\" }, [\n            \" An interactive learning project from \",\n            m(\"a\", { href: \"https://thinkster.io\" }, \"Thinkster\"),\n            \". Code \",\n            m.trust(\"&amp;\"),\n            \" design licensed under MIT. \",\n          ]),\n        ])\n      ),\n  }\n}\n\nexport default Footer\n","const Header = () => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \"nav.navbar navbar-light\",\n        m(\n          \".container\",\n          m(\"ion-buttons\", m(\"ion-menu-button\")),\n          m(\"a.navbar-brand\", { href: \"#\" }, \"conduit\"),\n          m(\n            \"ul.nav navbar-nav pull-xs-right\",\n            mdl.state.isLoggedIn()\n              ? [\n                  m(\n                    \"li.nav-item\",\n                    m(m.route.Link, { class: \"nav-link\", href: \"/editor\" }, [\n                      m(\"i.ion-compose.p-5\"),\n                      \"New Article\",\n                    ])\n                  ),\n                  m(\n                    \"li.nav-item\",\n                    m(\n                      m.route.Link,\n                      {\n                        class: \"nav-link\",\n                        href: `/settings/${mdl.user.username}`,\n                      },\n                      [m(\"i.ion-gear-a.p-5\"), \"Settings\"]\n                    )\n                  ),\n                  m(\n                    \"li.nav-item\",\n                    m(\n                      m.route.Link,\n                      {\n                        class: \"nav-link\",\n                        href: `/profile/${mdl.user.username}`,\n                      },\n                      mdl.user.username\n                    )\n                  ),\n                ]\n              : [\n                  m(\n                    \"li.nav-item\",\n                    m(\n                      m.route.Link,\n                      { class: \"nav-link\", href: \"/register\" },\n                      \"Sign up\"\n                    )\n                  ),\n                  m(\n                    \"li.nav-item\",\n                    m(\n                      m.route.Link,\n                      { class: \"nav-link\", href: \"/login\" },\n                      \"Login\"\n                    )\n                  ),\n                ]\n          )\n        )\n      ),\n  }\n}\n\nexport default Header\n","import Header from \"./header.js\"\nimport Footer from \"./footer.js\"\n\nconst Layout = () => {\n  return {\n    view: ({ children, attrs: { mdl } }) =>\n      m(\n        \"ion-app\",\n        m(Header, { mdl }),\n        m(\"ion-content\", children),\n        m(Footer, { mdl })\n      ),\n  }\n}\n\nexport default Layout\n","const info = () => {\n  return {\n    view: () =>\n      m(\n        \"footer\",\n        m(\"div\", { class: \"container\" }, [\n          m(\n            \"a\",\n            {\n              class: \"logo-font\",\n              href: \"https://github.com/gothinkster/realworld\",\n            },\n            \"conduit\"\n          ),\n          m(\"span\", { class: \"attribution\" }, [\n            \" An interactive learning project from \",\n            m(\"a\", { href: \"https://thinkster.io\" }, \"Thinkster\"),\n            \". Code \",\n            m.trust(\"&amp;\"),\n            \" design licensed under MIT. \",\n          ]),\n        ])\n      ),\n  }\n}\n\nexport default info\n","const model = {\n  state: {\n    isLoading: false,\n    loadingProgress: { max: 0, value: 0 },\n    isLoggedIn: () => sessionStorage.getItem(\"token\"),\n  },\n  settings: {},\n  page: \"\",\n  user: {},\n}\n\nexport default model\n","import Http from \"Http\"\nimport { Banner, FollowFavorite, Comments, Card } from \"components\"\nimport md from \"marked\"\n\nconst getArticleTask = (http) => (mdl) => (slug) =>\n  http.getTask(mdl)(`articles/${slug}`)\n\nconst Article = () => {\n  const data = {}\n  const state = {\n    status: \"loading\",\n    error: null,\n  }\n\n  const onSuccess = ({ article, comments }) => {\n    data.article = article\n    data.comments = comments\n    state.status = \"success\"\n  }\n\n  const onError = (error) => {\n    console.log(\"error\", error)\n    state.error = error\n    state.status = \"error\"\n  }\n\n  const loadData = (mdl) => {\n    state.status = \"loading\"\n    getArticleTask(Http)(mdl)(mdl.slug).fork(onError, onSuccess)\n  }\n\n  return {\n    oninit: ({ attrs: { mdl } }) => loadData(mdl),\n    view: ({ attrs: { mdl } }) => [\n      state.status == \"loading\" &&\n        m(Banner, [m(\"h1.logo-font\", \"Loading ...\")]),\n\n      state.status == \"error\" &&\n        m(Banner, [m(\"h1.logo-font\", `Error Loading Data: ${state.error}`)]),\n\n      state.status == \"success\" && [\n        m(\"ion-title\", m(\"h1\", data.article.title)),\n        m(FollowFavorite, {\n          mdl,\n          data: data.article,\n        }),\n\n        m(\"ion-text\", m.trust(md(data.article.body))),\n        m(Comments, {\n          mdl,\n          comments: data.comments,\n          reloadArticle: () => loadData(mdl),\n        }),\n      ],\n    ],\n  }\n}\n\nexport default Article\n","import Http from \"Http\"\nimport { errorViewModel } from \"Utils\"\nimport { compose, lensProp, over, split, trim, uniq } from \"ramda\"\n\nexport const loadArticleTask = (http) => (mdl) => (slug) =>\n  http.getTask(mdl)(`articles/${slug}`)\n\nconst formatTags = over(lensProp(\"tagList\"), compose(uniq, split(\" \"), trim))\n\nexport const submitArticleTask = (http) => (mdl) => (article) =>\n  http.postTask(mdl)(\"articles\")({ article })\n\nconst Editor = ({ attrs: { mdl } }) => {\n  let data = {\n    description: \"\",\n    title: \"\",\n    body: \"\",\n    tagList: \"\",\n  }\n  const state = {\n    disabled: false,\n  }\n\n  const initEditor = (mdl) => {\n    state.disabled = false\n    const onSuccess = ({ article }) => (data = article)\n\n    const onError = (errors) => (state.errors = errorViewModel(errors))\n\n    if (mdl.slug !== \"/editor\") {\n      loadArticleTask(Http)(mdl)(mdl.slug).fork(onError, onSuccess)\n    }\n  }\n\n  const submitData = (data) => {\n    state.disabled = true\n    const onSuccess = ({ article: { slug } }) => m.route.set(`/article/${slug}`)\n\n    const onError = (errors) => {\n      state.errors = errorViewModel(errors)\n      state.disabled = false\n    }\n\n    submitArticleTask(Http)(mdl)(data).fork(onError, onSuccess)\n  }\n\n  return {\n    oninit: ({ attrs: { mdl } }) => initEditor(mdl),\n    view: () =>\n      m(\n        \".editor-page\",\n        m(\n          \".container.page\",\n          m(\n            \".row\",\n            m(\n              \".col-md-10.offset-md-1.col-xs-12\",\n              m(\"form\", [\n                state.errors &&\n                  state.errors.map((e) =>\n                    m(\n                      \".error-messages\",\n                      m(\n                        \"ul\",\n                        `${e.key}`,\n                        e.values.map((error) => m(\"li\", error))\n                      )\n                    )\n                  ),\n                m(\n                  \"fieldset.form-group\",\n                  m(\"input.form-control.form-control-lg\", {\n                    type: \"text\",\n                    disabled: state.disabled,\n                    placeholder: \"Article Title\",\n                    onchange: (e) => (data.title = e.target.value),\n                    value: data.title,\n                  })\n                ),\n\n                m(\n                  \"fieldset.form-group\",\n                  m(\"input.form-control.form-control-lg\", {\n                    type: \"text\",\n                    disabled: state.disabled,\n                    placeholder: \"What's this article about?\",\n                    onchange: (e) => (data.description = e.target.value),\n                    value: data.description,\n                  })\n                ),\n\n                m(\n                  \"fieldset.form-group\",\n                  m(\"textarea.form-control.form-control-lg\", {\n                    rows: 8,\n                    placeholder: \"Write your article (in markdown)\",\n                    disabled: state.disabled,\n                    onchange: (e) => (data.body = e.target.value),\n                    value: data.body,\n                  })\n                ),\n\n                m(\n                  \"fieldset.form-group\",\n                  m(\"input.form-control.form-control-lg\", {\n                    type: \"text\",\n                    disabled: state.disabled,\n                    placeholder: \"Enter tags\",\n                    onchange: (e) => (data.tagList = e.target.value),\n                    value: data.tagList,\n                  })\n                ),\n\n                m(\n                  \"button.btn-lg.pull-xs-right.btn-primary\",\n                  { onclick: (e) => submitData(data) },\n                  \" Publish Article \"\n                ),\n              ])\n            )\n          )\n        )\n      ),\n  }\n}\nexport default Editor\n","import Http from \"Http\"\nimport {\n  Banner,\n  Loader,\n  Paginator,\n  Articles,\n  FeedNav,\n  SideBar,\n} from \"components\"\n\nconst getTagsTask = (http) => (mdl) => http.getTask(mdl)(\"tags\")\nconst getArticlesTask = (http) => (mdl) => (state) => (data) =>\n  data.tags.current == \"feed\"\n    ? http.getTask(mdl)(`articles/feed?limit=20&offset=${state.offset}`)\n    : http.getTask(mdl)(\n        `articles?limit=20&offset=${state.offset}&tag=${data.tags.current}`\n      )\n\nconst loadDataTask = (http) => (mdl) => (state) => (data) =>\n  Task.of((tags) => (articles) => ({ ...tags, ...articles }))\n    .ap(getTagsTask(http)(mdl))\n    .ap(getArticlesTask(http)(mdl)(state)(data))\n\nconst Home = () => {\n  const data = {\n    tags: { tagList: [], selected: [], current: \"global\" },\n    articles: {},\n  }\n  const state = {\n    feedStatus: \"loading\",\n    pageStatus: \"loading\",\n    limit: 20,\n    offset: 0,\n    total: 0,\n    error: null,\n  }\n\n  const loadInitData = (mdl) => {\n    const onSuccess = ({ articles, articlesCount, tags }) => {\n      data.articles = articles\n      state.total = articlesCount\n      data.tags.tagList = tags\n      state.pageStatus = \"success\"\n      state.feedStatus = \"success\"\n    }\n\n    const onError = (error) => {\n      console.log(\"error\", error)\n      state.error = error\n      state.pageStatus = \"error\"\n    }\n    state.pageStatus = \"loading\"\n    loadDataTask(Http)(mdl)(state)(data).fork(onError, onSuccess)\n  }\n\n  const loadArticles = (mdl) => {\n    const onSuccess = ({ articles, articlesCount }) => {\n      data.articles = articles\n      state.total = articlesCount\n      state.feedStatus = \"success\"\n    }\n\n    const onError = (error) => {\n      console.log(\"error\", error)\n      state.error = error\n      state.feedStatus = \"error\"\n    }\n\n    state.feedStatus = \"loading\"\n    getArticlesTask(Http)(mdl)(state)(data).fork(onError, onSuccess)\n  }\n\n  return {\n    oninit: ({ attrs: { mdl } }) => loadInitData(mdl),\n    view: ({ attrs: { mdl } }) => {\n      return [\n        !mdl.state.isLoggedIn() &&\n          m(Banner, [\n            m(\"h1.logo-font\", \"conduit\"),\n            m(\"p\", \"A place to share your knowledge.\"),\n          ]),\n\n        state.pageStatus == \"loading\" &&\n          m(Loader, [m(\"h1.logo-font\", `Loading Data`)]),\n\n        state.pageStatus == \"error\" &&\n          m(Banner, [m(\"h1.logo-font\", `Error Loading Data: ${state.error}`)]),\n\n        state.pageStatus == \"success\" &&\n          m(\"ion-row\", { wrap: true }, [\n            m(\"ion-col[col-9]\", [\n              m(FeedNav, { fetchData: loadArticles, mdl, data }),\n\n              state.feedStatus == \"loading\" && m(\"p\", \"Loading Articles ...\"),\n\n              state.feedStatus == \"success\"\n                ? state.total\n                  ? [\n                      m(Articles, { mdl, data }),\n\n                      m(Paginator, {\n                        mdl,\n                        state,\n                        fetchDataFor: (offset) => {\n                          state.offset = offset\n                          loadArticles(mdl)\n                        },\n                      }),\n                    ]\n                  : m(\"ion-text\", \"No articles are here... yet.\")\n                : \"\",\n            ]),\n\n            m(\"\", m(SideBar, { mdl, data })),\n          ]),\n      ]\n    },\n  }\n}\n\nexport default Home\n","import Http from \"Http\"\n\nexport const loginTask = (http) => (mdl) => (user) =>\n  http.postTask(mdl)(\"users/login\")({ user })\n\nconst Login = () => {\n  const state = { errors: {}, disabled: false }\n  const data = {\n    email: \"\",\n    password: \"\",\n  }\n\n  const onSubmit = (mdl, e) => {\n    e.preventDefault()\n    state.disabled = true\n    const onSuccess = ({ user }) => {\n      sessionStorage.setItem(\"token\", `Token ${user.token}`)\n      sessionStorage.setItem(\"user\", JSON.stringify(user))\n      mdl.user = user\n      state.disabled = false\n      m.route.set(\"/home\")\n    }\n\n    const onError = (errors) => {\n      state.errors = errors\n      state.disabled = false\n      console.log(state.errors)\n    }\n\n    loginTask(Http)(mdl)(data).fork(onError, onSuccess)\n  }\n\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \"div.auth-page\",\n        m(\n          \"div.container.page\",\n          m(\n            \"div.row\",\n            m(\"div.col-md-6.offset-md-3.col-xs-12\", [\n              m(\"h1.text-xs-center\", \"Login\"),\n              m(\n                \"p.text-xs-center\",\n                m(m.route.Link, { href: \"/register\" }, \"Need an account?\"),\n                state.errors[\"email or password\"] &&\n                  m(\n                    \".error-messages\",\n                    m(\n                      \"span\",\n                      `email or password  ${state.errors[\"email or password\"]}`\n                    )\n                  )\n              ),\n              m(\"form\", [\n                m(\n                  \"fieldset.form-group\",\n                  m(\"input.form-control.form-control-lg\", {\n                    type: \"text\",\n                    disabled: state.disabled,\n                    placeholder: \"email\",\n                    onchange: (e) => (data.email = e.target.value),\n                    value: data.email,\n                    onblur: (e) => state.isSubmitted && validate,\n                  }),\n                  state.errors.email &&\n                    m(\".error-messages\", m(\"span\", state.errors.email))\n                ),\n                m(\n                  \"fieldset.form-group\",\n                  m(\"input.form-control.form-control-lg\", {\n                    type: \"password\",\n                    disabled: state.disabled,\n                    placeholder: \"password\",\n                    onchange: (e) => (data.password = e.target.value),\n                    value: data.password,\n                    onblur: (e) => state.isSubmitted && validate,\n                  })\n                ),\n                m(\n                  \"button.btn.btn-lg.btn-primary.pull-xs-right\",\n                  { type: \"submit\", onclick: (e) => onSubmit(mdl, e) },\n                  \"Login\"\n                ),\n              ]),\n            ])\n          )\n        )\n      ),\n  }\n}\n\nexport default Login\n","import Http from \"Http\"\nimport { log, sanitizeImg } from \"Utils\"\nimport { Banner, Loader, Articles, Paginator } from \"components\"\n\nconst followAuthorUrl = (author) => `profiles/${author}/follow`\n\nconst followAuthorTask = (http) => (mdl) => (author) =>\n  http.postTask(mdl)(followAuthorUrl(author))()\n\nconst unFollowAuthorTask = (http) => (mdl) => (author) =>\n  http.deleteTask(mdl)(followAuthorUrl(author))\n\nconst getProfileTask = (http) => (mdl) => (username) =>\n  http.getTask(mdl)(`profiles/${username}`)\n\nconst getAuthorArticlesTask = (http) => (mdl) => (state) => (username) =>\n  http.getTask(mdl)(\n    `articles?limit=${state.limit}&offset=${state.offset}&author=${username}`\n  )\n\nconst getAuthorFavoriteArticlesTask = (http) => (mdl) => (state) => (\n  username\n) =>\n  http.getTask(mdl)(\n    `articles?limit=${state.limit}&offset=${state.offset}&favorited=${username}`\n  )\n\nexport const loadDataTask = (http) => (mdl) => (state) =>\n  state.showFaveArticles\n    ? getAuthorFavoriteArticlesTask(http)(mdl)(state)(mdl.slug)\n    : getAuthorArticlesTask(http)(mdl)(state)(mdl.slug)\n\nexport const loadInitDataTask = (http) => (mdl) => (state) =>\n  Task.of((profile) => (authorArticles) => ({\n    ...profile,\n    authorArticles,\n  }))\n    .ap(getProfileTask(http)(mdl)(mdl.slug))\n    .ap(getAuthorArticlesTask(http)(mdl)(state)(mdl.slug))\n\nconst Profile = ({ attrs: { mdl } }) => {\n  const data = {\n    authorArticles: { articles: [], articlesCount: 0 },\n    authorFavoriteArticles: { articles: [], articlesCount: 0 },\n  }\n\n  const state = {\n    pageStatus: \"loading\",\n    feedStatus: \"loading\",\n    showFaveArticles: false,\n    limit: 5,\n    offset: 0,\n    total: 0,\n    error: null,\n  }\n\n  const loadData = (mdl) => {\n    const onSuccess = (result) => {\n      state.showFaveArticles\n        ? (data.authorFavoriteArticles = result)\n        : (data.authorArticles = result)\n\n      state.total = state.showFaveArticles\n        ? data.authorFavoriteArticles.articlesCount\n        : data.authorArticles.articlesCount\n      state.feedStatus = \"success\"\n    }\n\n    const onError = (error) => {\n      console.log(\"error\", error)\n      state.error = error\n      state.feedStatus = \"error\"\n    }\n\n    state.feedStatus = \"loading\"\n    loadDataTask(Http)(mdl)(state).fork(onError, onSuccess)\n  }\n\n  const loadInitData = (mdl) => {\n    const onSuccess = ({ authorArticles, profile }) => {\n      data.authorArticles = authorArticles\n      data.profile = profile\n      state.pageStatus = \"success\"\n      state.feedStatus = \"success\"\n      state.total = data.authorArticles.articlesCount\n    }\n\n    const onError = (error) => {\n      console.log(\"error\", error)\n      state.error = error\n      state.pageStatus = \"error\"\n      m.route.set(\"/home\")\n    }\n\n    state.pageStatus = \"loading\"\n    loadInitDataTask(Http)(mdl)(state).fork(onError, onSuccess)\n  }\n\n  const selectFeed = (toShowFaveArticles) => {\n    state.showFaveArticles = toShowFaveArticles\n    state.offset = 0\n    loadData(mdl)\n  }\n\n  const toggleAuthorFollow = ({ author: { username, following } }) => {\n    const onError = log(\"toggleAuthorFollow, err-auth\")\n    const onSuccess = ({ profile: { following } }) =>\n      (data.profile.following = following)\n\n    let toggleTask = following ? unFollowAuthorTask : followAuthorTask\n    toggleTask(Http)(mdl)(username).fork(onError, onSuccess)\n  }\n\n  return {\n    oninit: ({ attrs: { mdl } }) => loadInitData(mdl),\n    view: ({ attrs: { mdl } }) => {\n      return m(\n        \".profile-page\",\n\n        state.pageStatus == \"loading\" &&\n          m(Loader, [m(\"h1.logo-font\", \"Loading ...\")]),\n        state.pageStatus == \"error\" &&\n          m(Banner, [m(\"h1.logo-font\", `Error Loading Data: ${state.error}`)]),\n        state.pageStatus == \"success\" && [\n          m(\n            \".user-info\",\n            m(\n              \".container\",\n              m(\n                \".row\",\n                m(\".col-xs-12.col-md-10.offset-md-1\", [\n                  m(\"img.user-img\", { src: sanitizeImg(data.profile.image) }),\n                  m(\"h4\", data.profile.username),\n                  m(\"p\", data.profile.bio),\n                  data.profile.username !== mdl.user.username\n                    ? m(\n                        \"button.btn.btn-sm.btn-outline-secondary.action-btn\",\n                        {\n                          onclick: (e) => {\n                            toggleAuthorFollow({\n                              author: {\n                                username: data.profile.username,\n                                following: data.profile.following,\n                              },\n                            })\n                          },\n                        },\n                        [\n                          data.profile.following\n                            ? [\n                                m(\"i.ion-minus-round\"),\n                                ` Unfollow ${data.profile.username} `,\n                              ]\n                            : [\n                                m(\"i.ion-plus-round\"),\n                                ` Follow ${data.profile.username} `,\n                              ],\n                        ]\n                      )\n                    : m(\n                        \"button.btn.btn-sm.btn-outline-secondary.action-btn\",\n                        {\n                          onclick: (e) =>\n                            m.route.set(`/settings/${data.profile.username}`),\n                        },\n                        [m(\"i.ion-gear-a.p-5\"), `Edit Profile Settings`]\n                      ),\n                ])\n              )\n            )\n          ),\n          m(\n            \".container\",\n            m(\n              \".row\",\n              m(\".col-xs-12.col-md-10.offset-md-1\", [\n                m(\n                  \".articles-toggle\",\n                  m(\"ul.nav.nav-pills.outline-active\", [\n                    m(\n                      \"li.nav-item\",\n                      m(\n                        `a.nav-link ${!state.showFaveArticles && \"active\"}`,\n                        {\n                          onclick: (e) => selectFeed(false),\n                        },\n                        \"My Articles\"\n                      )\n                    ),\n                    m(\n                      \"li.nav-item\",\n                      m(\n                        `a.nav-link ${state.showFaveArticles && \"active\"}`,\n                        {\n                          onclick: (e) => selectFeed(true),\n                        },\n                        \"Favorited Articles\"\n                      )\n                    ),\n                  ])\n                ),\n                state.feedStatus == \"loading\" && \"Loading Articles...\",\n                state.feedStatus == \"error\" &&\n                  m(Banner, [\n                    m(\"h1.logo-font\", `Error Loading Data: ${state.error}`),\n                  ]),\n                state.feedStatus == \"success\" && [\n                  state.showFaveArticles\n                    ? m(Articles, { mdl, data: data.authorFavoriteArticles })\n                    : m(Articles, { mdl, data: data.authorArticles }),\n\n                  m(Paginator, {\n                    mdl,\n                    state,\n                    fetchDataFor: (offset) => {\n                      state.offset = offset\n                      loadData(mdl)\n                    },\n                  }),\n                ],\n              ])\n            )\n          ),\n        ]\n      )\n    },\n  }\n}\n\nexport default Profile\n","import Http from \"Http\"\nimport { errorViewModel } from \"Utils\"\n\nconst registerTask = (http) => (mdl) => (user) =>\n  http.postTask(mdl)(\"users\")({ user })\n\nconst Register = () => {\n  const state = { errors: [], disabled: false }\n  const data = {\n    username: \"\",\n    email: \"\",\n    password: \"\",\n  }\n\n  const onSubmit = (mdl, e) => {\n    e.preventDefault()\n    console.log(mdl)\n    state.disabled = true\n    const onSuccess = ({ user }) => {\n      mdl.user = user\n      sessionStorage.setItem(\"token\", `Token ${user.token}`)\n      sessionStorage.setItem(\"user\", JSON.stringify(user))\n      state.disabled = false\n      m.route.set(\"/home\")\n      console.log(\"success\", user)\n    }\n\n    const onError = (errors) => {\n      state.disabled = false\n      state.errors = errorViewModel(errors)\n    }\n\n    state.isSubmitted = true\n    registerTask(Http)(mdl)(data).fork(onError, onSuccess)\n  }\n\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".auth-page\",\n        m(\n          \".container.page\",\n          m(\n            \".row\",\n            m(\".col-md-6.offset-md-3.col-xs-12\", [\n              m(\"h1.text-xs-center\", \"Sign Up\"),\n              m(\n                \"p.text-xs-center\",\n                m(m.route.Link, { href: \"/login\" }, \"Have an account?\")\n              ),\n\n              state.errors &&\n                state.errors.map((e) =>\n                  m(\n                    \".error-messages\",\n                    m(\n                      \"ul\",\n                      `${e.key}`,\n                      e.values.map((error) => m(\"li\", error))\n                    )\n                  )\n                ),\n\n              m(\"form\", [\n                m(\n                  \"fieldset.form-group\",\n                  m(\"input.form-control.form-control-lg\", {\n                    type: \"text\",\n                    disabled: state.disabled,\n                    placeholder: \"Your Name\",\n                    onchange: (e) => (data.username = e.target.value),\n                    value: data.username,\n                  })\n                ),\n\n                m(\n                  \"fieldset.form-group\",\n                  m(\"input.form-control.form-control-lg\", {\n                    type: \"text\",\n                    disabled: state.disabled,\n                    placeholder: \"email\",\n                    onchange: (e) => (data.email = e.target.value),\n                    value: data.email,\n                  })\n                ),\n                m(\n                  \"fieldset.form-group\",\n                  m(\"input.form-control.form-control-lg\", {\n                    type: \"password\",\n                    disabled: state.disabled,\n                    placeholder: \"password\",\n                    onchange: (e) => (data.password = e.target.value),\n                    value: data.password,\n                  })\n                ),\n                m(\n                  \"button.btn.btn-lg.btn-primary.pull-xs-right\",\n                  { type: \"submit\", onclick: (e) => onSubmit(mdl, e) },\n                  \"Sign Up\"\n                ),\n              ]),\n            ])\n          )\n        )\n      ),\n  }\n}\n\nexport default Register\n","import Http from \"Http\"\nimport { log } from \"Utils\"\n\nconst logout = () => {\n  sessionStorage.clear()\n  m.route.set(\"/home\")\n}\n\nconst submitTask = (http) => (mdl) => (data) => http.putTask(mdl)(\"user\")(data)\n\nconst User = ({\n  attrs: {\n    mdl: {\n      user: { image, username, password, bio, email },\n    },\n  },\n}) => {\n  let data = { image, username, password, bio, email }\n  const submit = (mdl, data) => {\n    const onSuccess = ({ user }) => {\n      sessionStorage.setItem(\"user\", JSON.stringify(user))\n      mdl.user = user\n      console.log(mdl.user)\n      m.route.set(\"/home\")\n    }\n    const onError = log(\"error\")\n    submitTask(Http)(mdl)(data).fork(onError, onSuccess)\n  }\n\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".settings-page\",\n        m(\n          \".container.page\",\n          m(\n            \".row\",\n            m(\".col-md-6.offset-md-3.col-xs-12\", [\n              m(\"h1.text-xs-center\", \"Your Settings\"),\n              m(\n                \"form\",\n                m(\"fieldset\", [\n                  m(\n                    \"fieldset.form-group\",\n                    m(\"input.form-control.form-control-lg\", {\n                      type: \"text\",\n                      placeholder: \"URL of profile picture\",\n                      onchange: (e) => (data.image = e.target.value),\n                      value: data.image,\n                    })\n                  ),\n                  m(\n                    \"fieldset.form-group\",\n                    m(\"input.form-control.form-control-lg\", {\n                      type: \"text\",\n                      placeholder: \"Your Name\",\n                      onchange: (e) => (data.username = e.target.value),\n                      value: data.username,\n                    })\n                  ),\n                  m(\n                    \"fieldset.form-group\",\n                    m(\"textarea.form-control.form-control-lg\", {\n                      placeholder: \"Short bio about you\",\n                      onchange: (e) => (data.bio = e.target.value),\n                      value: data.bio,\n                    })\n                  ),\n                  m(\n                    \"fieldset.form-group\",\n                    m(\n                      \"fieldset.form-group\",\n                      m(\"input.form-control.form-control-lg\", {\n                        type: \"text\",\n                        placeholder: \"Email\",\n                        onchange: (e) => (data.email = e.target.value),\n                        value: data.email,\n                      })\n                    )\n                  ),\n                  m(\n                    \"fieldset.form-group\",\n                    m(\n                      \"fieldset.form-group\",\n                      m(\"input.form-control.form-control-lg\", {\n                        type: \"password\",\n                        placeholder: \"Password\",\n                        onchange: (e) => (data.password = e.target.value),\n                        value: data.password,\n                      })\n                    )\n                  ),\n                  m(\n                    \"button.btn.btn-lg.btn-primary.pull-xs-right\",\n                    { onclick: (e) => submit(mdl, data) },\n                    \" Update Settings \"\n                  ),\n                  m(\n                    \"button.btn.btn-outline-danger.pull-xs-right\",\n                    { onclick: (e) => logout(mdl, data) },\n                    \"Or click here to logout.\"\n                  ),\n                ])\n              ),\n            ])\n          )\n        )\n      ),\n  }\n}\n\nexport default User\n","import Layout from \"./layout/index\"\nimport Home from \"./pages/home\"\nimport Article from \"./pages/article\"\nimport Profile from \"./pages/profile\"\nimport Register from \"./pages/register\"\nimport Login from \"./pages/login\"\nimport User from \"./pages/user\"\nimport Editor from \"./pages/editor\"\n\nconst routes = (mdl) => {\n  return {\n    \"/home\": {\n      onmatch: (_, b) => {\n        mdl.slug = b\n      },\n      render: () => m(Layout, { mdl }, m(Home, { mdl })),\n    },\n\n    \"/editor\": {\n      onmatch: (_, b) => {\n        mdl.slug = b\n      },\n      render: () => m(Layout, { mdl }, m(Editor, { mdl, key: mdl.slug })),\n    },\n\n    \"/editor/:slug\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Editor, { mdl })),\n    },\n\n    \"/article/:slug\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Article, { mdl })),\n    },\n\n    \"/profile/:slug\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Profile, { mdl, key: mdl.slug })),\n    },\n\n    \"/settings/:slug\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(User, { mdl, key: mdl.slug })),\n    },\n\n    \"/login\": {\n      onmatch: (_, b) => {\n        mdl.slug = b\n      },\n      render: () => m(Layout, { mdl }, m(Login, { mdl })),\n    },\n\n    \"/register\": {\n      onmatch: (_, b) => {\n        mdl.slug = b\n      },\n      render: () => m(Layout, { mdl }, m(Register, { mdl })),\n    },\n  }\n}\n\nexport default routes\n"]}